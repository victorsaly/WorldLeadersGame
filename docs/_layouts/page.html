---
layout: default
---

<!-- Mermaid.js support for diagrams -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    mermaid.initialize({
      startOnLoad: false,
      theme: 'base',
      themeVariables: {
        primaryColor: '#ffffff',
        primaryTextColor: '#000000',
        primaryBorderColor: '#000000',
        lineColor: '#000000',
        secondaryColor: '#f8f9fa',
        tertiaryColor: '#ffffff',
        background: '#ffffff',
        mainBkg: '#ffffff',
        secondBkg: '#f8f9fa',
        tertiaryBkg: '#ffffff',
        nodeTextColor: '#000000',
        textColor: '#000000',
        edgeLabelBackground: '#ffffff',
        clusterBkg: '#f8f9fa',
        clusterBorder: '#000000',
        defaultLinkColor: '#000000',
        titleColor: '#000000',
        edgeColor: '#000000'
      }
    });
    
    // Convert mermaid code blocks to diagrams
    const mermaidBlocks = document.querySelectorAll('code.language-mermaid, pre code.language-mermaid');
    mermaidBlocks.forEach((block, index) => {
      const pre = block.closest('pre') || block;
      const wrapper = document.createElement('div');
      wrapper.className = 'mermaid';
      wrapper.textContent = block.textContent;
      wrapper.id = 'mermaid-' + index;
      pre.parentNode.replaceChild(wrapper, pre);
    });
    
    // Also handle plain mermaid class
    const plainMermaidBlocks = document.querySelectorAll('.language-mermaid');
    plainMermaidBlocks.forEach((block, index) => {
      if (!block.classList.contains('mermaid')) {
        block.classList.add('mermaid');
        block.id = 'mermaid-plain-' + index;
      }
    });
    
    // Initialize mermaid
    mermaid.run();
  });
</script>
<style>
  .mermaid {
    text-align: center;
    margin: 1rem 0;
    background: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 1rem;
  }
  
  /* Ensure all Mermaid elements use monochrome colors */
  .mermaid svg {
    max-width: 100%;
    height: auto;
  }
  
  .mermaid .node rect,
  .mermaid .node circle,
  .mermaid .node ellipse,
  .mermaid .node polygon {
    fill: #ffffff !important;
    stroke: #000000 !important;
    stroke-width: 2px !important;
  }
  
  .mermaid .edgePath path {
    stroke: #000000 !important;
    stroke-width: 2px !important;
  }
  
  .mermaid .edgeLabel {
    background-color: #ffffff !important;
    color: #000000 !important;
  }
  
  .mermaid text {
    fill: #000000 !important;
    font-family: 'Inter', sans-serif !important;
  }
</style>

<!-- Reading progress indicator -->
<div class="reading-progress" id="reading-progress"></div>

<div class="page-content">
  <div class="wrapper">
    <div class="main-content">
      
      <!-- Breadcrumb navigation for better orientation -->
      {% if page.collection %}
        <nav class="breadcrumb" aria-label="Breadcrumb navigation">
          <a href="{{ '/' | relative_url }}">üè† Home</a>
          <span class="breadcrumb-separator">‚Üí</span>
          {% case page.collection %}
            {% when 'journey' %}
              <a href="{{ '/journey/' | relative_url }}">üìù Journey</a>
            {% when 'technical' %}
              <a href="{{ '/technical-docs/' | relative_url }}">üõ†Ô∏è Technical</a>
            {% when 'milestones' %}
              <a href="{{ '/milestones/' | relative_url }}">üèÜ Milestones</a>
            {% when 'issues' %}
              <a href="{{ '/issues/' | relative_url }}">üéØ Issues</a>
            {% when 'posts' %}
              <a href="{{ '/blog/' | relative_url }}">üì∞ Blog</a>
          {% endcase %}
          <span class="breadcrumb-separator">‚Üí</span>
          <span class="current-page">{{ page.title }}</span>
        </nav>
      {% endif %}
      
      <!-- Page header with enhanced metadata -->
      {% if page.title %}
        <header class="page-header">
          <h1>{{ page.title }}</h1>
          {% if page.subtitle %}
            <p class="page-subtitle">{{ page.subtitle }}</p>
          {% endif %}
          
          <!-- Enhanced page metadata -->
          <div class="page-meta">
            {% if page.date %}
              <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%B %d, %Y" }}</time>
            {% endif %}
            
            {% if page.category %}
              <span class="category-tag">{{ page.category }}</span>
            {% endif %}
            
            {% if page.status %}
              <span class="status-indicator status-{{ page.status }}">{{ page.status | capitalize }}</span>
            {% endif %}
            
            {% if page.week %}
              <span class="week-indicator">Week {{ page.week }}</span>
            {% endif %}
            
            {% if page.ai_autonomy %}
              <span class="ai-indicator">ü§ñ {{ page.ai_autonomy }}% AI</span>
            {% endif %}
            
            {% if page.completion_percentage %}
              <span class="completion-indicator">üìä {{ page.completion_percentage }}% Complete</span>
            {% endif %}
          </div>
          
          <!-- Tags for better discoverability -->
          {% if page.tags and page.tags.size > 0 %}
            <div class="page-tags">
              {% for tag in page.tags %}
                <span class="tag-badge">{{ tag }}</span>
              {% endfor %}
            </div>
          {% endif %}
        </header>
      {% endif %}

      <!-- Main content -->
      <main class="content">
        {{ content }}
      </main>

      <!-- Collection navigation (previous/next) -->
      {% if page.collection %}
        {% capture collection_name %}{{ page.collection }}{% endcapture %}
        {% assign collection_docs = site[collection_name] | sort: 'date' %}
        {% assign current_index = 0 %}
        
        {% for doc in collection_docs %}
          {% if doc.url == page.url %}
            {% assign current_index = forloop.index0 %}
            {% break %}
          {% endif %}
        {% endfor %}
        
        {% assign prev_index = current_index | minus: 1 %}
        {% assign next_index = current_index | plus: 1 %}
        {% assign prev_doc = collection_docs[prev_index] %}
        {% assign next_doc = collection_docs[next_index] %}
        
        {% if prev_doc or next_doc %}
          <nav class="collection-nav" aria-label="Collection navigation">
            {% if prev_doc %}
              <a href="{{ prev_doc.url | relative_url }}" class="nav-prev">
                ‚Üê {{ prev_doc.title }}
              </a>
            {% else %}
              <div></div>
            {% endif %}
            
            {% if next_doc %}
              <a href="{{ next_doc.url | relative_url }}" class="nav-next">
                {{ next_doc.title }} ‚Üí
              </a>
            {% else %}
              <div></div>
            {% endif %}
          </nav>
        {% endif %}
      {% endif %}

      <!-- Related content suggestions -->
      {% if page.collection and page.tags %}
        {% assign related_posts = site[page.collection] | where_exp: "post", "post.url != page.url" %}
        {% assign scored_posts = "" | split: "," %}
        
        {% for post in related_posts %}
          {% assign common_tags = 0 %}
          {% for tag in post.tags %}
            {% if page.tags contains tag %}
              {% assign common_tags = common_tags | plus: 1 %}
            {% endif %}
          {% endfor %}
          
          {% if common_tags > 0 %}
            {% assign scored_post = post | append: "|" | append: common_tags %}
            {% assign scored_posts = scored_posts | push: scored_post %}
          {% endif %}
        {% endfor %}
        
        {% if scored_posts.size > 0 %}
          <aside class="related-content">
            <h3>Related Content</h3>
            <div class="related-list">
              {% for scored_post in scored_posts limit: 3 %}
                {% assign post_data = scored_post | split: "|" %}
                {% assign post = site[page.collection] | where: "url", post_data[0] | first %}
                <div class="related-item">
                  <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
                  {% if post.excerpt %}
                    <p>{{ post.excerpt | strip_html | truncatewords: 15 }}</p>
                  {% endif %}
                </div>
              {% endfor %}
            </div>
          </aside>
        {% endif %}
      {% endif %}
      
    </div>
  </div>
</div>

<script>
// Reading progress indicator
window.addEventListener('scroll', function() {
  const indicator = document.getElementById('reading-progress');
  if (indicator) {
    const winHeight = window.innerHeight;
    const docHeight = document.documentElement.scrollHeight;
    const scrollTop = window.pageYOffset;
    const progress = (scrollTop / (docHeight - winHeight)) * 100;
    indicator.style.transform = `scaleX(${Math.min(progress, 100) / 100})`;
  }
});

// Smooth scroll for collection navigation
document.querySelectorAll('.collection-nav a').forEach(link => {
  link.addEventListener('click', function(e) {
    // Allow normal navigation for collection links
    return true;
  });
});
</script>