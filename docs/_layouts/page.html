---
layout: default
---

<!-- Prism.js for syntax highlighting and copy-to-clipboard -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/normalize-whitespace/prism-normalize-whitespace.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />

<style>
/* Custom Prism.js theme for educational content */
.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: #708090;
  font-style: italic;
}

.token.punctuation {
  color: #999;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
  color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
  color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
  color: #a67f59;
}

.token.atrule,
.token.attr-value,
.token.keyword {
  color: #07a;
}

.token.function,
.token.class-name {
  color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
  color: #e90;
}

/* Enhanced code block styling */
pre[class*="language-"] {
  position: relative;
  background: #f8f9fa;
  border: 1px solid #e9ecef;
  border-radius: 8px;
  margin: 1.5rem 0;
  overflow: hidden;
}

pre[class*="language-"] code {
  background: none;
  padding: 0;
  font-size: 14px;
  line-height: 1.5;
}

/* Toolbar styling for educational content */
.code-toolbar .toolbar {
  opacity: 1;
  background: #e9ecef;
  border-bottom: 1px solid #dee2e6;
  padding: 0;
  font-size: 0.875rem;
}

.code-toolbar .toolbar .toolbar-item {
  margin-right: 1rem;
}

.code-toolbar .toolbar .toolbar-item span {
  color: #495057;
  font-weight: 500;
}

.code-toolbar .toolbar .toolbar-item button {
  background: #1a1a1a;
  color: #ffffff;
  border: 1px solid #374151;
  padding: 0;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  min-width: 32px;
  /* height: 32px; */
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.code-toolbar .toolbar .toolbar-item button:hover {
  background: #374151;
  border-color: #6b7280;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

.code-toolbar .toolbar .toolbar-item button:active {
  background: #111827;
  transform: translateY(0);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

/* Copy icon */
.code-toolbar .toolbar .toolbar-item button:before {
  content: "📋";
  font-size: 14px;
}

.code-toolbar .toolbar .toolbar-item button.copied:before {
  content: "✅";
}

/* Language badge */
pre[class*="language-"]:before {
  content: attr(data-language);
  position: absolute;
  top: 0.5rem;
  left: 1rem;
  background: #28a745;
  color: white;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: uppercase;
  z-index: 10;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Specific language colors */
pre[class*="language-javascript"]:before { background: #f7df1e; color: #000; }
pre[class*="language-typescript"]:before { background: #3178c6; }
pre[class*="language-css"]:before { background: #1572b6; }
pre[class*="language-html"]:before { background: #e34f26; }
pre[class*="language-json"]:before { background: #292929; }
pre[class*="language-yaml"]:before { background: #cb171e; }
pre[class*="language-bash"]:before { background: #4eaa25; }
pre[class*="language-csharp"]:before { background: #239120; }
pre[class*="language-sql"]:before { background: #336791; }

/* Line numbers styling */
.line-numbers .line-numbers-rows {
  border-right: 1px solid #dee2e6;
  background: #f1f3f4;
}

.line-numbers-rows > span:before {
  color: #6c757d;
}

/* Copy button success state */
.code-toolbar .toolbar .toolbar-item button[data-copy-state="copy-success"] {
  background: #28a745;
}

.code-toolbar .toolbar .toolbar-item button[data-copy-state="copy-success"]:after {
  content: " ✓";
}

/* Inline code styling */
:not(pre) > code[class*="language-"] {
  background: #f8f9fa;
  border: 1px solid #e9ecef;
  border-radius: 4px;
  padding: 0.2rem 0.4rem;
  font-size: 0.875rem;
  white-space: nowrap;
}

/* Educational code explanation panels */
.code-explanation {
  background: #e3f2fd;
  border-left: 4px solid #2196f3;
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 0 8px 8px 0;
}

.code-explanation h4 {
  margin: 0 0 0.5rem 0;
  color: #1565c0;
  font-size: 1rem;
}

.code-explanation p {
  margin: 0;
  color: #0d47a1;
  font-size: 0.9rem;
  line-height: 1.5;
}
</style>

<!-- Mermaid.js support for diagrams -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    mermaid.initialize({
      startOnLoad: false,
      theme: 'base',
      themeVariables: {
        primaryColor: '#ffffff',
        primaryTextColor: '#000000',
        primaryBorderColor: '#000000',
        lineColor: '#000000',
        secondaryColor: '#f8f9fa',
        tertiaryColor: '#ffffff',
        background: '#ffffff',
        mainBkg: '#ffffff',
        secondBkg: '#f8f9fa',
        tertiaryBkg: '#ffffff',
        nodeTextColor: '#000000',
        textColor: '#000000',
        edgeLabelBackground: '#ffffff',
        clusterBkg: '#f8f9fa',
        clusterBorder: '#000000',
        defaultLinkColor: '#000000',
        titleColor: '#000000',
        edgeColor: '#000000'
      }
    });
    
    // Convert mermaid code blocks to diagrams
    const mermaidBlocks = document.querySelectorAll('code.language-mermaid, pre code.language-mermaid');
    mermaidBlocks.forEach((block, index) => {
      const pre = block.closest('pre') || block;
      const wrapper = document.createElement('div');
      wrapper.className = 'mermaid';
      wrapper.textContent = block.textContent;
      wrapper.id = 'mermaid-' + index;
      pre.parentNode.replaceChild(wrapper, pre);
    });
    
    // Also handle plain mermaid class
    const plainMermaidBlocks = document.querySelectorAll('.language-mermaid');
    plainMermaidBlocks.forEach((block, index) => {
      if (!block.classList.contains('mermaid')) {
        block.classList.add('mermaid');
        block.id = 'mermaid-plain-' + index;
      }
    });
    
    // Initialize mermaid
    mermaid.run();
  });
</script>

<!-- Initialize Prism.js -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Configure Prism.js plugins
  if (typeof Prism !== 'undefined') {
    // Configure normalize whitespace
    Prism.plugins.NormalizeWhitespace.setDefaults({
      'remove-trailing': true,
      'remove-indent': true,
      'left-trim': true,
      'right-trim': true,
      'break-lines': 80,
      'indent': 2,
      'remove-initial-line-feed': true,
      'tabs-to-spaces': 2,
      'spaces-to-tabs': 0
    });

    // Add language labels to code blocks
    document.querySelectorAll('pre[class*="language-"]').forEach(function(pre) {
      const className = pre.className;
      const language = className.match(/language-(\w+)/);
      if (language) {
        pre.setAttribute('data-language', language[1]);
        
        // Add line numbers class if code is longer than 10 lines
        const code = pre.querySelector('code');
        if (code && code.textContent.split('\n').length > 10) {
          pre.classList.add('line-numbers');
        }
      }
    });

    // Re-highlight all code blocks
    Prism.highlightAll();
    
    // Initialize copy to clipboard
    if (Prism.plugins.toolbar) {
      Prism.plugins.toolbar.registerButton('copy-to-clipboard', function(env) {
        var linkCopy = document.createElement('button');
        linkCopy.textContent = ''; // Remove text, rely on CSS icons
        linkCopy.className = 'copy-button';
        linkCopy.setAttribute('aria-label', 'Copy code to clipboard');
        linkCopy.setAttribute('title', 'Copy code to clipboard');
        
        linkCopy.addEventListener('click', function () {
          navigator.clipboard.writeText(env.code).then(function() {
            linkCopy.classList.add('copied');
            linkCopy.setAttribute('aria-label', 'Code copied to clipboard');
            linkCopy.setAttribute('title', 'Code copied!');
            
            setTimeout(function() {
              linkCopy.classList.remove('copied');
              linkCopy.setAttribute('aria-label', 'Copy code to clipboard');
              linkCopy.setAttribute('title', 'Copy code to clipboard');
            }, 2000);
          }).catch(function() {
            // Fallback for older browsers
            var textArea = document.createElement('textarea');
            textArea.value = env.code;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            
            linkCopy.classList.add('copied');
            linkCopy.setAttribute('aria-label', 'Code copied to clipboard');
            linkCopy.setAttribute('title', 'Code copied!');
            setTimeout(function() {
              linkCopy.classList.remove('copied');
              linkCopy.setAttribute('aria-label', 'Copy code to clipboard');
              linkCopy.setAttribute('title', 'Copy code to clipboard');
            }, 2000);
          });
        });
        
        return linkCopy;
      });
    }
  }
});
</script>

<style>
  .mermaid {
    text-align: center;
    margin: 1rem 0;
    background: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 1rem;
  }
  
  /* Ensure all Mermaid elements use monochrome colors */
  .mermaid svg {
    max-width: 100%;
    height: auto;
  }
  
  .mermaid .node rect,
  .mermaid .node circle,
  .mermaid .node ellipse,
  .mermaid .node polygon {
    fill: #ffffff !important;
    stroke: #000000 !important;
    stroke-width: 2px !important;
  }
  
  .mermaid .edgePath path {
    stroke: #000000 !important;
    stroke-width: 2px !important;
  }
  
  .mermaid .edgeLabel {
    background-color: #ffffff !important;
    color: #000000 !important;
  }
  
  .mermaid text {
    fill: #000000 !important;
    font-family: 'Inter', sans-serif !important;
  }
</style>

<!-- Reading progress indicator -->
<div class="reading-progress" id="reading-progress"></div>

<div class="page-content">
  <div class="wrapper">
    <div class="main-content">
      
      <!-- Breadcrumb navigation for better orientation -->
      {% if page.collection %}
        <nav class="breadcrumb" aria-label="Breadcrumb navigation">
          <a href="{{ '/' | relative_url }}">🏠 Home</a>
          <span class="breadcrumb-separator">→</span>
          {% case page.collection %}
            {% when 'journey' %}
              <a href="{{ '/journey/' | relative_url }}">📝 Journey</a>
            {% when 'technical' %}
              <a href="{{ '/technical-docs/' | relative_url }}">🛠️ Technical</a>
            {% when 'milestones' %}
              <a href="{{ '/milestones/' | relative_url }}">🏆 Milestones</a>
            {% when 'issues' %}
              <a href="{{ '/issues/' | relative_url }}">🎯 Issues</a>
            {% when 'posts' %}
              <a href="{{ '/blog/' | relative_url }}">📰 Blog</a>
          {% endcase %}
          <span class="breadcrumb-separator">→</span>
          <span class="current-page">{{ page.title }}</span>
        </nav>
      {% endif %}
      
      <!-- Page header with enhanced metadata -->
      {% if page.title and page.show_title != false %}
        <header class="page-header">
          <h1>{{ page.title }}</h1>
          {% if page.subtitle %}
            <p class="page-subtitle">{{ page.subtitle }}</p>
          {% endif %}
          
          <!-- Enhanced page metadata -->
          <div class="page-meta">
            {% if page.date %}
              <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%B %d, %Y" }}</time>
            {% endif %}
            
            {% if page.category %}
              <span class="category-tag">{{ page.category }}</span>
            {% endif %}
            
            {% if page.status %}
              <span class="status-indicator status-{{ page.status }}">{{ page.status | capitalize }}</span>
            {% endif %}
            
            {% if page.week %}
              <span class="week-indicator">Week {{ page.week }}</span>
            {% endif %}
            
            {% if page.ai_autonomy %}
              <span class="ai-indicator">🤖 {{ page.ai_autonomy }}% AI</span>
            {% endif %}
            
            {% if page.completion_percentage %}
              <span class="completion-indicator">📊 {{ page.completion_percentage }}% Complete</span>
            {% endif %}
          </div>
          
          <!-- Tags for better discoverability -->
          {% if page.tags and page.tags.size > 0 %}
            <div class="page-tags">
              {% for tag in page.tags %}
                <span class="tag-badge">{{ tag }}</span>
              {% endfor %}
            </div>
          {% endif %}
        </header>
      {% endif %}

      <!-- Main content -->
      <main class="content">
        {{ content }}
      </main>

      <!-- Collection navigation (previous/next) -->
      {% if page.collection %}
        {% capture collection_name %}{{ page.collection }}{% endcapture %}
        {% assign collection_docs = site[collection_name] | sort: 'date' %}
        {% assign current_index = 0 %}
        
        {% for doc in collection_docs %}
          {% if doc.url == page.url %}
            {% assign current_index = forloop.index0 %}
            {% break %}
          {% endif %}
        {% endfor %}
        
        {% assign prev_index = current_index | minus: 1 %}
        {% assign next_index = current_index | plus: 1 %}
        {% assign prev_doc = collection_docs[prev_index] %}
        {% assign next_doc = collection_docs[next_index] %}
        
        {% if prev_doc or next_doc %}
          <nav class="collection-nav" aria-label="Collection navigation">
            {% if prev_doc %}
              <a href="{{ prev_doc.url | relative_url }}" class="nav-prev">
                ← {{ prev_doc.title }}
              </a>
            {% else %}
              <div></div>
            {% endif %}
            
            {% if next_doc %}
              <a href="{{ next_doc.url | relative_url }}" class="nav-next">
                {{ next_doc.title }} →
              </a>
            {% else %}
              <div></div>
            {% endif %}
          </nav>
        {% endif %}
      {% endif %}

      <!-- Related content suggestions -->
      {% if page.collection and page.tags %}
        {% assign related_posts = site[page.collection] | where_exp: "post", "post.url != page.url" %}
        {% assign scored_posts = "" | split: "," %}
        
        {% for post in related_posts %}
          {% assign common_tags = 0 %}
          {% for tag in post.tags %}
            {% if page.tags contains tag %}
              {% assign common_tags = common_tags | plus: 1 %}
            {% endif %}
          {% endfor %}
          
          {% if common_tags > 0 %}
            {% assign scored_post = post | append: "|" | append: common_tags %}
            {% assign scored_posts = scored_posts | push: scored_post %}
          {% endif %}
        {% endfor %}
        
        {% if scored_posts.size > 0 %}
          <aside class="related-content">
            <h3>Related Content</h3>
            <div class="related-list">
              {% for scored_post in scored_posts limit: 3 %}
                {% assign post_data = scored_post | split: "|" %}
                {% assign post = site[page.collection] | where: "url", post_data[0] | first %}
                <div class="related-item">
                  <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
                  {% if post.excerpt %}
                    <p>{{ post.excerpt | strip_html | truncatewords: 15 }}</p>
                  {% endif %}
                </div>
              {% endfor %}
            </div>
          </aside>
        {% endif %}
      {% endif %}
      
    </div>
  </div>
</div>

<script>
// Reading progress indicator
window.addEventListener('scroll', function() {
  const indicator = document.getElementById('reading-progress');
  if (indicator) {
    const winHeight = window.innerHeight;
    const docHeight = document.documentElement.scrollHeight;
    const scrollTop = window.pageYOffset;
    const progress = (scrollTop / (docHeight - winHeight)) * 100;
    indicator.style.transform = `scaleX(${Math.min(progress, 100) / 100})`;
  }
});

// Add hero section styling to existing background image functionality
// The backgroundImages variable is already defined in default.html layout
// Get the current random image from the CSS variable set by default.html
const currentBgImage = getComputedStyle(document.body).getPropertyValue('--random-bg-image');

// Apply the random background to hero sections and page headers
const heroStyle = document.createElement('style');
heroStyle.textContent = `
  .hero-section {
    background-image: ${currentBgImage};
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    position: relative;
  }
  .hero-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 1;
  }
  .hero-section * {
    position: relative;
    z-index: 2;
  }
`;
document.head.appendChild(heroStyle);

// Smooth scroll for collection navigation
document.querySelectorAll('.collection-nav a').forEach(link => {
  link.addEventListener('click', function(e) {
    // Allow normal navigation for collection links
    return true;
  });
});
</script>